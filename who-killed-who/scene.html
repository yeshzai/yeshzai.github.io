<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Lab Scene</title>
    <!--<link rel="stylesheet" type="text/css" href="scene.css"/>-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        html {
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        body {
            margin: 0;
            padding: 0;
            background: #020202;
            font-family: monospace;
            color: white;
            overflow: hidden;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #0af;
            color: #000;
            font-size: 16px;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0px 5px 10px rgba(0, 170, 255, 0.5);
            transition: transform 0.2s ease-in-out;
            z-index: 9999;
        }
        .back-button:hover {
            transform: scale(1.1);
        }

        .scene {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        .background-image {
            position: absolute;
            top: 0;
            right: 0;
            width: 60vw; 
            height: 100vh;
            background: url('assets/img/scene.jpg') no-repeat center center;
            background-size: cover;
        }

        .body-silhouette {
            position: absolute;
            bottom: 3%;
            left: 60%; 
            width: 350px;
            height: auto;
            opacity: 0.7;
            filter: grayscale(100%) blur(3px);
            transform: perspective(800px) rotateX(25deg) rotateY(20deg);
        }

        .blood-splatter {
            position: absolute;
            opacity: 0.8;
            filter: blur(1px);
            pointer-events: none; 
        }        

        .id-card {
            width: 48px;
            transform: rotate(-22deg) perspective(600px) rotateX(55deg); 
            transition: transform 0.3s ease;
            position: relative;
            top: 56.7%;
            left: 72%; 
            z-index: 1;
        }
        .id-card:hover {
            transform: rotate(-10deg) scale(1.05); 
        }

        .partial-fingerprint {
            position: relative;
            width: 25px; 
            top: 51%;
            left: 49.3%; 
            cursor: pointer;
            transition: transform 0.3s ease, filter 0.3s ease;
            filter: brightness(115%) contrast(120%) drop-shadow(0 0 6px rgba(255, 255, 255, 0.3));
            opacity: 1;
            z-index: 1000;
        }
        .partial-fingerprint:hover {
            transform: scale(1.1);
            filter: brightness(130%) contrast(130%) drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        .crumpled-paper {
            width: 37px;
            transition: transform 0.3s ease;
            position: relative;
            top: 86.7%;
            left: 52%; 
            filter: brightness(25%);
            z-index: 1;
        }
        .crumpled-paper::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(0,0,0,0.3) 20%, rgba(0,0,0,0.8) 90%);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
        }
        .crumpled-paper:hover {
            transform: rotate(-10deg) scale(1.05); 
            filter: brightness(60%);
        }

        .computer-screen {
            position: fixed;  
            top: 52.8vh;  
            right: 26.8vw;
            width: 111px;
            height: 66.5px;
            background: linear-gradient(to top, #111, #222);
            border: 3px solid #0af;  
            padding: 14px;
            overflow: hidden;
            font-size: 10px;
            color: #0af;  
            white-space: pre;
            transform: translateY(-50%) rotateX(25deg) rotateY(5deg);
            box-shadow: 0px 5px 20px rgba(0, 170, 255, 0.5);  
            perspective: 800px;
            text-align: center;
            animation: glitch 3.5s infinite alternate;
        }
        .computer-screen-wrapper {
            position: absolute;
            top: 52.7%;
            right: 26.9%;
            width: 75px;
            height: 30px;
            z-index: 1000; 
            cursor: pointer;
            pointer-events: auto;
        }
        .computer-screen-wrapper:hover .computer-screen {
            box-shadow: 0px 0px 12px #0af;
            filter: brightness(1.3);
        }

        @keyframes perspectiveZoom {
            0% {
                transform: scale(1) translate(0, 0);
            }
            100% {
                transform: scale(3) translate(-15vw, -5vh); 
            }
        }
        .zoom-effect {
            animation: perspectiveZoom 4s ease-in-out forwards;
        }        

        @keyframes glitch {
            0% { text-shadow: 2px 2px red, -2px -2px green; }
            50% { text-shadow: -2px -2px red, 2px 2px green; }
            100% { text-shadow: 2px -2px red, -2px 2px green; }
        }

        .laptop-corner {
            position: fixed;
            left: 5%;
            bottom: 5% !important;
            display: inline-block;
            transform: translateY(-50%);
        }
        .laptop-corner p {
            color: white;
            text-align: center;
            position: fixed;
            left: 57%;
            bottom: 1%;
            transform: translateX(-50%) rotate(-25deg);
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
        }

        .laptop {
            width: 250px;
            cursor: pointer;
            transition: transform 0.2s;
            transform: scaleX(-1);
        }
        .laptop:hover {
            transform: scaleX(-1) scale(1.1);
        }

        .folder-container {
            position: fixed !important;
            left: 10%;
            top: 28% !important;
            transform: translateY(-50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 82px;
            z-index: 1000;
        }
        .folder-container-1 {
            position: fixed !important;
            left: 20%;
            top: 51% !important;
            transform: translateY(-50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 1000;
        }
        .folder-container h5 {
            text-align: center;
            width: 100%; 
            margin-bottom: 5px;
        }
        .folder-container .folder-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .folder {
            width: 150px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .folder:hover {
            transform: scale(1.1);
        }

        .folder-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            font-size: 10px;
            font-family: monospace;
            flex-wrap: wrap;
        }        

        @keyframes moveFadeOut {
            0% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-200px);
                opacity: 0;
            }
        }
        .move-fade-out {
            position: fixed !important;
            top: 50% !important; 
            left: 20%; 
            animation: moveFadeOut 2s ease-out forwards;
        }

        #videoModal {
            z-index: 1055 !important;
        }

        .input-container {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .pin-input {
            width: 40px;
            height: 50px;
            text-align: center;
            font-size: 24px;
            border: 2px solid #007bff;
            border-radius: 5px;
            background-color: black;
            color: white;
        }
        .pin-input:focus {
            outline: none;
            border-color: #00ffff;
        }

        #ExternalLink {
            position: fixed;
            bottom: 30px;
            right: 30px;
            color: white;
            text-decoration: none;
            background-color: #28a745;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.2s;
            z-index: 1000;
        }
        #ExternalLink:hover {
            background-color: white;
            color: #28a745;
            transform: scale(1.05);
        }

        .fingerprint {
            position: absolute;
            top: 10%;  
            left: 56%;
            width: 27px;
            transform: rotate(-10deg);
            cursor: zoom-in;
            opacity: 0.85;
        }
        #fingerprintImage {
            transition: transform 0.3s ease;
        }
        #fingerprintImage:hover {
            transform: scale(1.05);
        }          
    </style>
</head>
<body>
    <button class="back-button" onclick="location.href='index.html'">‚Üê Back to Premise</button>
    <a id="ExternalLink" href="https://seanmaravillo.github.io/image-video-steganography/" target="_blank">Tools</a>

    <audio id="sound-paper" src="assets/audio/paper-uncrumple.mp3" preload="auto"></audio>
    <audio id="sound-idcard" src="assets/audio/id-card-pickup.mp3" preload="auto"></audio>
    <audio id="sound-folder" src="assets/audio/folder-open.mp3" preload="auto"></audio>
    <audio id="sound-fingerprint-scan" src="assets/audio/fingerprint-scan.mp3" preload="auto"></audio>
    <audio id="sound-laptop-open" src="assets/audio/laptop-open.mp3" preload="auto"></audio>
    <audio id="sound-laptop-close" src="assets/audio/laptop-close.mp3" preload="auto"></audio>

    <div class="scene">
        <div class="background-image"></div>
        <img src="assets/img/dead-body-bgremoved.png" alt="Slumped body" class="body-silhouette">
        <img src="assets/img/blood-desk.png" class="blood-splatter" style="top: 55.5%; left: 65%; width: 85px; transform: rotate(5deg); z-index: 1;">
        <img src="assets/img/blood-floor.png" class="blood-splatter" style="bottom: 2%; right: 29%; width: 120px; transform: rotate(25deg);">
        <img src="assets/img/id.png" class="id-card" id="idCard" data-bs-toggle="modal" data-bs-target="#idModal" alt="ID Card">
        <img src="assets/img/ball-crumbled-paper.png" class="crumpled-paper" id="crumpledPaper" data-bs-toggle="modal" data-bs-target="#crumpledPaperModal" alt="Ball Crumpled Paper">
        <img src="assets/img/Partial_FP__Dr._Esteban.png" alt="Partial Fingerprint" id="fingerprintScan" class="partial-fingerprint" data-bs-toggle="tooltip" data-bs-placement="top" title="Partial fingerprint fragment" onclick="openFingerprintModal()"/>
        <div class="computer-screen-wrapper" onclick="zoomIntoScreen()">
            <div class="computer-screen folder-row" id="folderRow"></div>
        </div>
        <!--<div class="computer-screen-wrapper">
            <div class="computer-screen folder-row" id="folderRow"></div>
        </div>-->
    </div>

    <!-- ID Modal -->
    <div class="modal fade" id="idModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content bg-dark text-white text-center">
            <div class="modal-header">
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body m-0">
                <img src="assets/img/id.png" alt="ID Card" style="width: 50%; margin: 0; padding: 0;">
            </div>
        </div>
        </div>
    </div>

    <!-- Crumpled Paper Modal -->
    <div class="modal fade" id="crumpledPaperModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-dark text-white text-center">
                <div class="modal-header">
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body m-0">
                    <img src="assets/img/crumpled-note.png" alt="Ball Crumpled Card" style="width: 50%; margin: 0; padding: 0;">
                </div>
            </div>
        </div>
    </div>

    <!-- Partial Fingerprint Modal -->
    <div class="modal fade" id="fingerprintModal" tabindex="-1" aria-labelledby="fingerprintModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header border-0">
                    <h5 class="modal-title text-white" id="fingerprintModalLabel">Partial Fingerprint</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="assets/img/Partial_FP__Dr._Esteban.png" class="img-fluid rounded" alt="Fingerprint Detail">
                </div>
            </div>
        </div>
    </div>
  
    <div class="laptop-corner">
        <p>Vincent's Laptop</p>
        <img src="assets/img/laptop.png" alt="Laptop" class="laptop" id="laptop" data-bs-toggle="modal" data-bs-target="#laptopModal">
    </div>

    <!-- Laptop Modal with PIN Entry -->
    <div id="laptopModal" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white text-center">
                <div class="modal-header">
                    <h5 class="modal-title">Enter PIN</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- PIN Inputs -->
                    <div id="pinSection">
                        <p>Enter 9-digit access code:</p>
                        <div class="input-container mb-3">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                            <input type="text" class="pin-input" maxlength="1">
                        </div>
                        <button class="btn btn-primary" onclick="checkPIN()">Unlock</button>
                    </div>

                    <div id="accessInfo" class="mt-3" style="display: none;">
                        <!--<h5>üìÅ Decrypted Log: Server_Log.v</h5>-->
                        <p><strong>Remote Access Point Created:</strong> 192.168.0.42:8080</p>
                        <p><strong>Activity Log:</strong></p>
                        <ul class="text-start" style="margin-left: 30px;">
                          <li>01:00 AM ‚Äì Gaming session started (Steam login)</li>
                          <li>02:47 AM ‚Äì System Override Triggered (via elevated access)</li>
                          <li>02:50 AM ‚Äì Remote Connection Opened to Internal Network</li>
                          <li>03:00 AM ‚Äì Gaming session ended</li>
                        </ul>
                        <p><strong>Verbal Admission:</strong> "I just‚Ä¶ I was paid to set up remote access. That‚Äôs all."</p>
                        <p class="text-warning"><strong>‚ö†Ô∏è Note:</strong> Vincent had credentials to security logs and may have tampered with surveillance footage.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="folder-container">
        <div class="folder-wrapper">
            <h5>Evidence Folder</h5>
            <img src="assets/img/evidence-folder.png" alt="Evidence Folder" class="folder mb-5" id="evidence-folder" data-bs-toggle="modal" data-bs-target="#evidenceModal">
        </div>
        <div class="folder-wrapper">
            <h5>Pending Analysis</h5>
            <img src="assets/img/police-reports-folder.png" alt="Pending Analysis Folder" class="folder mb-5" id="analysis-folder" data-bs-toggle="modal" data-bs-target="#pendingAnalysisModal">
        </div>
    </div>
    <div class="folder-container-1">
        <div class="folder-wrapper">
            <h5>Suspect Folder</h5>
            <img src="assets/img/suspect-folder.png" alt="Suspect Folder" class="folder" id="suspect-folder" data-bs-toggle="modal" data-bs-target="#suspectModal">
        </div>
    </div>

    <!-- Evidence Modal -->
    <div class="modal fade" id="evidenceModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Evidence Files</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li style="cursor: pointer;" onclick="openEvidence('videoModal')">üìÅ Tampered Security Footage</li>
                        <li style="cursor: default;">üìÅ Missing File - [Error: Cannot Open]</li>
                        <li style="cursor: pointer;" onclick="openEvidence('emailMariaModal')">üìß Deleted Email ‚Äì Maria Dela Cruz</li>
                        <li style="cursor: pointer;" onclick="openEvidence('emailAngelaModal')">üìß Corrupted Email ‚Äì Angela Cortez</li>
                        <li style="cursor: pointer;" onclick="openEvidence('emailEstebanModal')">üìß Recovered Email ‚Äì Dr. Esteban Ramirez</li>
                        <li style="cursor: pointer;" onclick="openEvidence('noteModalRafael')">üìù Note to Dr. Esteban ‚Äì Rafael</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal (Hidden Initially) -->
    <div id="videoModal" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Tampered Security Footage</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <video id="securityFootage" width="100%" controls>
                        <source src="assets/video/footage.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>
        </div>
    </div>

    <!-- Maria's Email Modal -->
    <div class="modal fade" id="emailMariaModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Deleted Email - Maria Dela Cruz</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning py-1 px-2 small">Recovered from Trash - May be incomplete</div>
                    <p style="opacity: 0.8; font-family: 'Courier New', monospace;">
                        ‚ÄúI don‚Äôt want to be part of this. Don‚Äôt make me do it.‚Äù
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Angela's Email Modal -->
    <div class="modal fade" id="emailAngelaModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Corrupted Email - Angela Cortez</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger py-1 px-2 small">‚ö†Ô∏è Corrupted Email ‚Äî File integrity compromised</div>
                    <p style="font-family: monospace; letter-spacing: 0.5px;">
                        ‚Äú...you know who ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà‚ñà‚ñà it.‚Äù
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Esteban's Email Modal -->
    <div class="modal fade" id="emailEstebanModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Recovered Email - Dr. Esteban Ramirez</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success py-1 px-2 small">Recovered from archival logs</div>
                    <pre style="background: #1e1e1e; padding: 10px; border-radius: 5px; font-family: monospace;">
From: esteban.ramirez@institute.org
To: rafael.mendoza@institute.org
Subject: Urgent Containment

    We need to contain this before it spreads further.
                    </pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Rafael's Note Modal -->
    <div class="modal fade" id="noteModalRafael" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Rafael‚Äôs Note to Dr. Esteban</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="assets/img/rafael-note-to-dr-esteban.png" alt="Note from Rafael to Dr. Esteban" class="img-fluid rounded shadow" style="max-height: 500px;">
                    <p class="mt-3"><small><i>Handwritten note found among Dr. Esteban‚Äôs belongings, requesting help with a worsening situation.</i></small></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Pending Analysis -->
    <div class="modal fade" id="pendingAnalysisModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Pending Analysis</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p><strong>These files were flagged for further review but never made it to the official report.
                        "We were supposed to circle back to this... but no one ever did."</strong></p>
                    <div class="ms-4">
                        <p>üìù <a style="text-decoration: none; color: inherit;" href="https://drive.google.com/drive/folders/1HqZXI738gPIgYEetEp2NU3bfdbN7fmSU?usp=sharing" target="_blank" rel="noopener noreferrer">
                            Undeclared Photos</a>
                        </p>
                        <p>üìù <a style="text-decoration: none; color: inherit;" href="https://drive.google.com/drive/folders/1K9oGFkY6v3eSWlUoWgxgXCANciSaTNZa?usp=sharing" target="_blank" rel="noopener noreferrer">
                            Recovered Clips</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Suspect Modal -->
    <div class="modal fade" id="suspectModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Suspect Profile Files</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li style="cursor: pointer;" onclick="openSuspectProfile('Vincent')">üë§ Vincent Lim</li>
                        <li style="cursor: pointer;" onclick="openSuspectProfile('Maria')">üë§ Maria Dela Cruz</li>
                        <li style="cursor: pointer;" onclick="openSuspectProfile('Esteban')">üë§ Dr. Esteban Ramirez</li>
                        <li style="cursor: pointer;" onclick="openSuspectProfile('Rafael')">üë§ Rafael Kyle Jimenez</li>
                        <li style="cursor: pointer;" onclick="openSuspectProfile('Angela')">üë§ Angela Cortez</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>    

    <!-- Suspect Profile Modal -->
    <div id="suspectProfileModal" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content bg-dark text-white text-center">
                <div class="modal-header">
                    <h5 class="modal-title" id="suspectName">Suspect Profile</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body mt-4">
                    <!-- Container for Folder + Fingerprint -->
                    <div class="position-relative d-inline-block">
                        <img id="suspectImage" src="assets/img/folder.png" alt="Suspect Folder" style="width: 90%; max-width: 800px;" class="mb-3">
                        <img id="fingerprintImage" src="assets/img/fingerprint.png" alt="Fingerprint Evidence" class="fingerprint mt-2" onclick="zoomFingerprint('')">
                    </div>
                    <p id="suspectDesc"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Fingerprint Zoom Modal -->
    <div class="modal fade" id="fingerprintZoomModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header border-0">
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center p-0">
                    <img id="zoomedFingerprint" src="assets/img/fingerprint.png" alt="Fingerprint Zoomed" class="img-fluid" style="width: 40%;">
                </div>
            </div>
        </div>
    </div>

    <button id="playSound" style="display:none;">Play</button>
    <audio id="eerieAudio" loop>
        <source src="assets/audio/eerie-music.mp3" type="audio/mpeg">
    </audio>
    <audio id="newTrack">
        <source src="assets/audio/glitch-sound.mp3" type="audio/mpeg">
    </audio>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Crumpled Paper
        document.getElementById("crumpledPaper").addEventListener("click", () => {
          document.getElementById("sound-paper").play();
        });
      
        // ID Card
        document.getElementById("idCard").addEventListener("click", () => {
          document.getElementById("sound-idcard").play();
        });

        // Fingerprint Scan
        document.getElementById("fingerprintScan").addEventListener("click", () => {
            document.getElementById("sound-fingerprint-scan").play();
        });
      
        // Folder(s)
        const folderIds = ["evidence-folder", "analysis-folder", "suspect-folder"];
        folderIds.forEach(id => {
            document.getElementById(id).addEventListener("click", () => {
                document.getElementById("sound-folder").currentTime = 0; // reset so it can replay fast
                document.getElementById("sound-folder").play();
            });
        });
      
        // Laptop
        const laptop = document.getElementById("laptop");
        const laptopModal = document.getElementById("laptopModal");
        laptop.addEventListener("click", () => {
            const openSound = document.getElementById("sound-laptop-open");
            openSound.currentTime = 0;
            openSound.play();
        });
        // Bootstrap modal close event listener
        laptopModal.addEventListener("hidden.bs.modal", () => {
            const closeSound = document.getElementById("sound-laptop-close");
            closeSound.currentTime = 0;
            closeSound.play();
        });
    </script>     

    <script>
        const folderSnippets = [
            "üìÅ", "üìÅ", "üìÅ", "üìÅ", "üìÅ", "üìÅ"
        ];
        const folderRow = document.getElementById('folderRow');
        
        // Initially create folder icons
        folderSnippets.forEach((folder, index) => {
            const span = document.createElement('span');
            span.textContent = folder;
            folderRow.appendChild(span);

            // Check if it's the first folder and fade it out
        if (index === 0) {
            span.style.opacity = "0.3";  // Set opacity lower for the first folder
            span.style.transition = "opacity 1s ease-in-out";  // Smooth transition for fading effect
        }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            tooltipTriggerList.map(function (tooltipTriggerEl) {
              return new bootstrap.Tooltip(tooltipTriggerEl)
            })
        });
          
        function openFingerprintModal() {
            const modal = new bootstrap.Modal(document.getElementById('fingerprintModal'));
            modal.show();
        }   
    </script>

    <script>
        const correctPIN = "247158230";

        // Autofocus and backspace logic
        const inputs = document.querySelectorAll('.pin-input');
        inputs.forEach((input, index) => {
            input.addEventListener('input', () => {
                if (input.value.length === 1 && index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Backspace' && input.value === '' && index > 0) {
                    inputs[index - 1].focus();
                }
            });
        });

        function checkPIN() {
            let enteredPIN = '';
            inputs.forEach(input => {
                enteredPIN += input.value;
            });

            if (enteredPIN === correctPIN) {
                document.getElementById('pinSection').style.display = 'none';
                document.getElementById('accessInfo').style.display = 'block';
                document.querySelector('#laptopModal .modal-title').textContent = 'üìÅ Decrypted Log: Server_Log.v';
            } else {
                alert("Incorrect PIN. Try again.");
            }
        }
    </script>    

    <script>
        // This will ensure both modals are initialized correctly
        var evidenceModalInstance = new bootstrap.Modal(document.getElementById('evidenceModal'));
        var videoModalInstance = new bootstrap.Modal(document.getElementById('videoModal'));

        // Function to open the video modal and close the evidence modal
        function openVideo() {
            // Hide the evidence modal
            evidenceModalInstance.hide();

            // Show the video modal
            videoModalInstance.show();
        }

        // When the video modal is closed, show the evidence modal again
        document.getElementById('videoModal').addEventListener('hidden.bs.modal', function () {
            evidenceModalInstance.show();
        });

        function openEvidence(targetId) {
            // Hide the evidence modal
            evidenceModalInstance.hide();
    
            // Show the target modal
            const targetModal = new bootstrap.Modal(document.getElementById(targetId));
            targetModal.show();
    
            // When closed, reopen evidence modal
            document.getElementById(targetId).addEventListener('hidden.bs.modal', function () {
                evidenceModalInstance.show();
            }, { once: true });
        }
    </script>

    <script>
        // This will ensure both modals are initialized correctly
        var suspectModalInstance = new bootstrap.Modal(document.getElementById('suspectModal'));
        var suspectProfileModalInstance = new bootstrap.Modal(document.getElementById('suspectProfileModal'));

        // Function to open the suspect profile modal and close the suspect modal
        function openSuspectProfile() {
            // Hide the suspect modal
            suspectModalInstance.hide();

            // Show the suspect profile modal
            suspectProfileModalInstance.show();
        }

        // When the suspect profile modal is closed, show the suspect modal again
        document.getElementById('suspectProfileModal').addEventListener('hidden.bs.modal', function () {
            suspectModalInstance.show();
        });
    </script>

    <script>
        function openSuspectProfile(name) {
            // Close the suspect list modal
            const suspectModal = bootstrap.Modal.getInstance(document.getElementById('suspectModal'));
            suspectModal.hide();
    
            // Set dynamic content
            const profileImage = document.getElementById('suspectImage');
            const profileTitle = document.getElementById('suspectName');
            const profileDesc = document.getElementById('suspectDesc');
            const fingerprintImage = document.getElementById('fingerprintImage');
    
            // Customize based on name
            let fingerprintSrc = ""; // Store fingerprint image path

            if (name === "Vincent") {
                profileImage.src = "assets/img/vincent-profile.png";
                fingerprintImage.src = "assets/img/fingerprint-vincent.png";
                profileTitle.textContent = "Vincent Lim";
                profileDesc.innerHTML = `
                    <strong>Suspect #1:</strong> Known associate of the victim. Claims an alibi at the time of the incident.<br><br>
                    <strong>Position:</strong> Graduate Student ‚Äì Security Admin<br>
                    <strong>Department:</strong> Computer Science<br>
                    <strong>Age:</strong> 24<br>
                    <strong>Known Traits:</strong> Technically gifted, reclusive, anxious under pressure<br><br>

                    <strong>Background:</strong><br>
                    Vincent is a skilled programmer with a gift for exploiting system vulnerabilities. He was hired part-time by the university to oversee lab network integrity. 
                    Rumors say he‚Äôs in deep student debt and has taken on risky side gigs to make ends meet. He‚Äôs known to crack under pressure and tries to avoid conflict at all costs.<br><br>

                    <strong>Alibi:</strong> Claims he was gaming online from 1:00 AM to 3:00 AM. Activity appears verifiable, 
                    but system override was executed on his laptop at 2:47 AM.<br><br>

                    <strong>Suspicious Behavior:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Executed a system override at 2:47 AM.</li>
                        <li>Had admin-level access to security logs and surveillance systems.</li>
                        <li>Admitted: ‚ÄúI just‚Ä¶ I was paid to set up remote access. That‚Äôs all.‚Äù</li>
                    </ul>

                    <strong>Personal Info and Notes:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Shares an apartment with another grad student off-campus.</li>
                        <li>Regularly posts on obscure tech forums under an alias.</li>
                        <li>Receives regular cash deposits from an unknown external account.</li>
                        <li>Deeply in debt due to student loans.</li>
                        <li>Maintains the lab‚Äôs internal security systems.</li>
                        <li>Often collaborates with staff but prefers working independently.</li>
                        <li>Known to freelance for extra income (script writing, backend work).</li>
                        <li>Previously reprimanded for installing unapproved tools on lab machines.</li>
                    </ul>
                `;
            } else if (name === "Maria") {
                profileImage.src = "assets/img/maria-profile.png";
                fingerprintImage.src = "assets/img/fingerprint-maria.png";
                profileTitle.textContent = "Maria Dela Cruz";
                profileDesc.innerHTML = `
                    <strong>Suspect #2:</strong> Longtime lab technician. Inconsistent statements.<br><br>
                    <strong>Position:</strong> Lab Technician<br>
                    <strong>Department:</strong> Computer Science<br>
                    <strong>Age:</strong> 31<br>
                    <strong>Known Traits:</strong> Quiet, dependable, observant<br><br>

                    <strong>Background:</strong><br>
                    Maria was a Computer Science alumna who didn‚Äôt make it into research but was hired for her reliability. 
                    She‚Äôs worked behind the scenes for years, silently supporting students and faculty alike. 
                    Recently, she became more withdrawn, and staff noted she had been ‚Äúacting off‚Äù days before the incident.<br><br>

                    <strong>Alibi:</strong> Claims she was doing inventory at 2:30 AM and heard a loud noise, but saw nothing unusual.<br><br>

                    <strong>Suspicious Behavior:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Security logs show her keycard was used to enter the lab at 2:15 AM.</li>
                        <li>A recently deleted email recovered from her phone hidden in a lab inventory list reads: "I don‚Äôt want to be part of this. Don‚Äôt make me do it.‚Äù</li>
                        <li>A piece of her torn glove was found near the server rack.</li>
                    </ul>

                    <strong>Personal Info and Notes:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Lives in a dorm near campus; rarely goes home.</li>
                        <li>Keeps a journal and sketchpad in her locker.</li>
                        <li>Had a close friendship with Luis Calderon, the victim.</li>
                        <li>Was seen arguing quietly with Vincent Lim two days before the murder.</li>
                        <li>Grew up in a military family and values discipline.</li>
                        <li>Responsible for inventory, equipment checks, and lab maintenance.</li>
                        <li>Has access to all secure zones for maintenance purposes.</li>
                        <li>Sometimes stays late to finish her rounds or assist students.</li>
                        <li>Keeps a personal logbook of unusual system behavior.</li>
                    </ul>
                `;
            } else if (name === "Esteban") {
                profileImage.src = "assets/img/esteban-profile.png";
                fingerprintImage.src = "assets/img/fingerprint-esteban.png";
                profileTitle.textContent = "Dr. Esteban Ramirez";
                profileDesc.innerHTML = `
                    <strong>Suspect #3:</strong>  Senior faculty member with deep ties to the Overseer Project.<br><br>
                    <strong>Position:</strong> Professor ‚Äì Cybernetics Consultant<br>
                    <strong>Department:</strong> Engineering & Cybernetics<br>
                    <strong>Age:</strong> 47<br>
                    <strong>Known Traits:</strong> Analytical, composed, methodical<br><br>

                    <strong>Background:</strong><br>
                    A veteran professor with ties to multiple national research councils. 
                    Esteban is known for playing the long game ‚Äî he rarely speaks out, but when he does, it‚Äôs with intent. 
                    He co-authored white papers on neural interface systems and was reportedly involved in classified military research before entering academia full time.<br><br>

                    <strong>Alibi:</strong> Claims he never left his office, working on research grants until morning.<br><br>

                    <strong>Suspicious Behavior:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>A recovered email to Rafael reads: "We need to contain this before it spreads further."</li>
                        <li>He was one of the few with clearance to restricted areas of the lab.</li>
                        <li>Has access to security footages and was granted elevated access a day before the murder.</li>
                    </ul>

                    <strong>Personal Info and Notes:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Widower with one child studying abroad.</li>
                        <li>Keeps his office locked and monitored with independent cameras.</li>
                        <li>Once vouched for Rafael when faculty questioned the Overseer Project‚Äôs ethics.</li>
                        <li>Has a medical condition requiring medication ‚Äî pills were found in the lab trash.</li>
                        <li>Often suffers from insomnia and works odd hours.</li>
                        <li>Brought in to assist with specific phases of the Overseer Project.</li>
                        <li>Often works late, alone, and maintains a heavily secured office.</li>
                        <li>Keeps minimal communication outside official university channels.</li>
                        <li>Has been seen in heated discussions with Rafael in the past.</li>
                    </ul>
                `;
            } else if (name === "Rafael") {
                profileImage.src = "assets/img/rafael-profile.png";
                fingerprintImage.src = "assets/img/fingerprint-rafael.png";
                profileTitle.textContent = "Rafael Kyle Jimenez";
                profileDesc.innerHTML = `
                    <strong>Suspect #4:</strong> Overseer Project‚Äôs creator. Keeps everything under tight control.<br><br>
                    <strong>Position:</strong> Lead Researcher ‚Äì Overseer Project<br>
                    <strong>Department:</strong> Computer Science (Student)<br>
                    <strong>Age:</strong> 23<br>
                    <strong>Known Traits:</strong> Detail-oriented, guarded, rarely social<br><br>

                    <strong>Background:</strong><br>
                    A top-performing student with a brilliant mind for system architecture and experimental technologies. 
                    Rafael proposed the Overseer Project as part of his thesis, which gained special approval due to its complexity and potential. 
                    Despite his age, he‚Äôs treated like a peer by some professors due to his technical ability. 
                    Many admire his work, though he prefers to work alone.<br><br>

                    <strong>Alibi:</strong> Claims he was grading papers at home and remotely accessing the system for maintenance.<br><br>

                    <strong>Suspicious Behavior:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>He had clearance to the deleted security footage."</li>
                        <li>The victim was rumored to be exposing a hidden project Rafael was leading.</li>
                        <li>His access logs were wiped.</li>
                    </ul>

                    <strong>Personal Info and Notes:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Lives off-campus in a gated subdivision.</li>
                        <li>Has no known social media accounts.</li>
                        <li>Rumored to have had a falling out with the victim before the incident.</li>
                        <li>Known for being secretive and having absolute control over lab access.</li>
                        <li>Tends to take project matters into his own hands, avoiding higher university oversight.</li>
                        <li>Frequently works off-site but retains full administrative access to lab systems.</li>
                        <li>Known to keep sensitive documents heavily encrypted.</li>
                        <li>Avoids direct confrontation, prefers to handle issues quietly.</li>
                    </ul>
                `;
            } else if (name === "Angela") {
                profileImage.src = "assets/img/angela-profile.png";
                fingerprintImage.src = "assets/img/fingerprint-angela.png";
                profileTitle.textContent = "Angela Cortez";
                profileDesc.innerHTML = `
                    <strong>Suspect #5:</strong> Promising researcher with connections to both the victim and sensitive data.<br><br>
                    <strong>Position:</strong> Research Assistant ‚Äì AI Specialist<br>
                    <strong>Department:</strong> Computer Science<br>
                    <strong>Age:</strong> 22<br>
                    <strong>Known Traits:</strong> Curious, intelligent, fiercely independent<br><br>

                    <strong>Background:</strong><br>
                    Angela is a rising star in the AI field and the youngest to be granted research privileges in her department. 
                    She collaborated with the victim on a side project unrelated to Overseer, but the two were reportedly growing distant. 
                    Angela has voiced concerns in the past about ethical limits in experimental research ‚Äî especially after discovering fragments of files she was never supposed to see.<br><br>

                    <strong>Alibi:</strong> Was in the Engineering Department working late. 
                    However, her ID card was used to enter the lab at 1:58 AM, which she denies prompting that she lost her ID card.<br><br>

                    <strong>Suspicious Behavior:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>A message from the victim reads: "If something happens to me‚Ä¶‚Äù redacted or corrupted."</li>
                        <li>A photo of her and Lucas contains the other half of the corrupted message.</li>
                        <li>Her handwritten notes reference "Project Overseer", though she insists she didn‚Äôt know its full scope.</li>
                    </ul>

                    <strong>Personal Info and Notes:</strong>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li>Lives in the Engineering residence hall.</li>
                        <li>Keeps detailed handwritten notebooks.</li>
                        <li>Was seen crying alone outside the lab two nights before the incident.</li>
                        <li>Has a strained relationship with Rafael, who once discredited her work during a panel.</li>
                        <li>Worked closely with the victim on a previous research paper.</li>
                        <li>Accessed sensitive files during after-hours research.</li>
                        <li>Denies involvement in the Overseer Project, though fragments of related data were found in her possession.</li>
                    </ul>
                `;
            }

            // Set the fingerprint image source
            //fingerprintImageZoom.src = fingerprintSrc;

            // Update the fingerprint's onclick dynamically based on the current suspect
            fingerprintImage.setAttribute("onclick", `zoomFingerprint('${name}')`);
    
            // Show the suspect profile modal
            const profileModal = new bootstrap.Modal(document.getElementById('suspectProfileModal'));
            profileModal.show();

            // Open the fingerprint zoom modal
            //const fingerprintModal = new bootstrap.Modal(document.getElementById('fingerprintModal'));
            //fingerprintModal.show();
        }

        function zoomFingerprint(suspectName) {
            // Play the fingerprint scan sound
            document.getElementById("sound-fingerprint-scan").play();

            const fingerprintModal = new bootstrap.Modal(document.getElementById('fingerprintZoomModal'));
            const zoomedFingerprint = document.getElementById('zoomedFingerprint');
            
            // Set the fingerprint image based on the clicked suspect
            if (suspectName === "Vincent") {
                zoomedFingerprint.src = "assets/img/fingerprint-vincent.png";  
            } else if (suspectName === "Maria") {
                zoomedFingerprint.src = "assets/img/fingerprint-maria.png"; 
            } else if (suspectName === "Esteban") {
                zoomedFingerprint.src = "assets/img/fingerprint-esteban.png"; 
            } else if (suspectName === "Rafael") {
                zoomedFingerprint.src = "assets/img/fingerprint-rafael.png"; 
            } else if (suspectName === "Angela") {
                zoomedFingerprint.src = "assets/img/fingerprint-angela.png"; 
            } 
            
            // Open the fingerprint modal
            fingerprintModal.show();
        }
    </script>    

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Try to play the eerie music immediately
            let eerieAudio = document.getElementById("eerieAudio");
            eerieAudio.play().catch(() => {
                // If blocked, wait for user interaction to start it
                document.addEventListener("click", function () {
                    eerieAudio.play();
                    sessionStorage.setItem("musicPlaying", "true"); // Save state
                }, { once: true }); // Ensures this event runs only once
            });
        });

        
        /*document.addEventListener("DOMContentLoaded", function () {
            const screenWrapper = document.querySelector('.computer-screen-wrapper');
            screenWrapper.addEventListener('click', zoomIntoScreen);
        });*/
            

        function zoomIntoScreen() {
            const scene = document.querySelector('.scene'); // Target the whole scene
            const folderContainer = document.querySelector('.folder-container');
            const folderContainer1 = document.querySelector('.folder-container-1');
            const laptopCorner = document.querySelector('.laptop-corner');

            // Lock the folder-container in place before moving it
            //folderContainer.style.position = "fixed";
            //folderContainer.style.top = folderContainer.offsetTop + "px";  Keeps it from shifting

            // REMOVE folder-container from the scene before scaling starts
            document.body.appendChild(folderContainer);  
            document.body.appendChild(folderContainer1);  
            document.body.appendChild(laptopCorner);   
            /*folderContainer.style.position = "fixed";  // Keeps it in place
            folderContainer.style.top = "50%";  
            folderContainer.style.left = "20%";  */

            // Apply animations
            folderContainer.classList.add('move-fade-out');
            folderContainer1.classList.add('move-fade-out');
            laptopCorner.classList.add('move-fade-out');
            scene.classList.add('zoom-effect');

            // Set music state so it continues on screen.html
            sessionStorage.setItem("musicPlaying", "true");

            // Play glitch sound just before switching pages (with lower volume)
            let glitchAudio = document.getElementById("newTrack");
            glitchAudio.volume = 0.1;  // Set volume (0.0 = mute, 1.0 = full volume)
            glitchAudio.play();
        
            // Wait for the zoom animation to complete before redirecting
            setTimeout(() => {
                window.location.href = "screen.html"; // Destination page
            }, 4000); // Matches animation duration
        }
    </script>    
    
</body>
</html>
